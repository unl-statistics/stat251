<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.475">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Your Name">

<title>Stat 251 - Data Wrangling - Homework 6: Strings</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Stat 251 - Data Wrangling</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://srvanderplas.github.io/stat-computing-r-python/">
 <span class="menu-text">Textbook</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../syllabus.pdf">
 <span class="menu-text">Syllabus</span></a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#background-information" id="toc-background-information" class="nav-link active" data-scroll-target="#background-information">Background Information</a>
  <ul class="collapse">
  <li><a href="#content-warning" id="toc-content-warning" class="nav-link" data-scroll-target="#content-warning">Content Warning</a></li>
  </ul></li>
  <li><a href="#assignment-instructions" id="toc-assignment-instructions" class="nav-link" data-scroll-target="#assignment-instructions">Assignment Instructions</a></li>
  <li><a href="#using-r-to-analyze-replace-this-with-poets-usernames-poems" id="toc-using-r-to-analyze-replace-this-with-poets-usernames-poems" class="nav-link" data-scroll-target="#using-r-to-analyze-replace-this-with-poets-usernames-poems">Using R to analyze &lt;Replace this with poet’s username&gt;’s poems</a>
  <ul class="collapse">
  <li><a href="#splitting-poems-into-lines" id="toc-splitting-poems-into-lines" class="nav-link" data-scroll-target="#splitting-poems-into-lines">Splitting Poems into Lines</a></li>
  <li><a href="#summarizing-poems" id="toc-summarizing-poems" class="nav-link" data-scroll-target="#summarizing-poems">Summarizing Poems</a></li>
  <li><a href="#poetry-analysis" id="toc-poetry-analysis" class="nav-link" data-scroll-target="#poetry-analysis">Poetry Analysis</a></li>
  </ul></li>
  <li><a href="#using-python-to-analyze-replace-this-with-poets-usernames-poems" id="toc-using-python-to-analyze-replace-this-with-poets-usernames-poems" class="nav-link" data-scroll-target="#using-python-to-analyze-replace-this-with-poets-usernames-poems">Using Python to analyze &lt;Replace this with poet’s username&gt;’s poems</a>
  <ul class="collapse">
  <li><a href="#splitting-poems-into-lines-1" id="toc-splitting-poems-into-lines-1" class="nav-link" data-scroll-target="#splitting-poems-into-lines-1">Splitting Poems into Lines</a></li>
  <li><a href="#summarizing-poems-1" id="toc-summarizing-poems-1" class="nav-link" data-scroll-target="#summarizing-poems-1">Summarizing Poems</a></li>
  <li><a href="#poetry-analysis-1" id="toc-poetry-analysis-1" class="nav-link" data-scroll-target="#poetry-analysis-1">Poetry Analysis</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">String Processing in R and Python</h1>
  <div class="quarto-categories">
    <div class="quarto-category">HW</div>
  </div>
  </div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Homework </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">Due: March 27, 2023</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<p>Note: This assignment must be submitted in github classroom.</p>
<section id="background-information" class="level1 unnumbered">
<h1 class="unnumbered">Background Information</h1>
<p>In this assignment, you will analyze poems written by two of Reddit’s famous poets: <code>Poem_for_your_sprog</code> and <code>SchnoodleDoodleDo</code>. I scraped these poems using the <code>RedditExtractoR</code> package on March 16, 2023. <a href="https://raw.githubusercontent.com/unl-stat251/06-strings/main/get_data.R">Code</a></p>
<p><code>poem_for_your_sprog</code> writes poems in response to other people’s comments (‘sprog’ means child) on <code>AskReddit</code> posts. <code>SchnoodleDoodleDo</code> writes poems in response to comments and posts on subreddits that are usually related to cute or wholesome content, such as <code>aww</code>, <code>WhatsWrongWithYourDog</code>, <code>wholesomememes</code>, and more.</p>
<p>You can find the CSV files of each writer’s reddit comments in <code>sprog_poems.csv</code> and <code>schnoodle_poems.csv</code>, respectively.</p>
<p>As part of this analysis, you should learn how to do the following tasks:</p>
<ol type="1">
<li>Split a vector of strings into components (lines)</li>
<li>Create a new data frame with the components as a new variable</li>
<li>Replace characters to clean up your data</li>
<li>Compute basic numerical statistics on strings (word count, capitalization, use of punctuation and symbols, number of syllables, etc.)</li>
<li>Combine this information to assess poetry styles</li>
</ol>
<section id="content-warning" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="content-warning">Content Warning</h2>
<p>These poems may address adult topics and/or use strong or vulgar language, as they are taken from Reddit. I have not censored them in any way because I want you to work with data that is realistic. You should find a few test cases which you are comfortable with to use to test out your code, but you do not need to read all of the poems (and in both cases, I’ve provided you with approximately 1000 samples, so it’s <em>probably</em> too much to read in any case).</p>
<p>Here are 5 indices (counting from 1) which are approximately G or PG in content for each poet:</p>
<ul>
<li>Sprog poems: 1, 2, 3, 4, 7</li>
<li>SchnoodleDoodleDo poems: 1, 2, 3, 5, 6</li>
</ul>
<p>These should be sufficient for you to test your code even if you are worried about being exposed to adult themes or language during this activity.</p>
</section>
</section>
<section id="assignment-instructions" class="level1 unnumbered">
<h1 class="unnumbered">Assignment Instructions</h1>
<p>Choose a poet and complete the following tasks in R or Python. Once you finish the set of tasks provided here, start on the other poet in the other language. You will get bonus points up to 50% of the assignment’s value for completing the tasks in both languages.</p>
</section>
<section id="using-r-to-analyze-replace-this-with-poets-usernames-poems" class="level1">
<h1>Using R to analyze &lt;Replace this with poet’s username&gt;’s poems</h1>
<section id="splitting-poems-into-lines" class="level2">
<h2 class="anchored" data-anchor-id="splitting-poems-into-lines">Splitting Poems into Lines</h2>
<p>Split the poem into lines and create a data frame that has</p>
<ul>
<li>a new column called <code>poem_id</code>, numbered from one to the total number of poems by the poet in question</li>
<li>a new variable called <code>line</code> that contains the text of each line of the poem (one row per poem line). To get this, you may need to split the comment string by the endline character (<code>\n</code>) and then unnest or expand your data frame.</li>
<li>a new variable called <code>line_no</code> that contains the line number of the poem. This should be computed per poem.</li>
</ul>
<p>Ensure that you are splitting lines by a string which makes sense. Some poems have multiple paragraphs (stanzas) and may have a blank line in between; you want to preserve this blank line as it will help you make sense of the poem. Some poems instead have blank lines between every line of the poem; in these cases, you may want to split by e.g.&nbsp;<code>\n\n</code> instead of <code>\n</code>.</p>
<p>See <a href="./checkpoints.html#part1">Part 1 Checkpoint</a> for an example of what the output should look like from each poet.</p>
<div class="cell">

</div>
</section>
<section id="summarizing-poems" class="level2">
<h2 class="anchored" data-anchor-id="summarizing-poems">Summarizing Poems</h2>
<p>For each poem, create a summary data frame that contains:</p>
<ul>
<li>Average number of words per line in the poem</li>
<li>Number of lines in the poem</li>
<li>Number of characters which are not letters or spaces (punctuation, numbers, and any non-ASCII characters)</li>
<li>Number of uppercase letters in the poem</li>
<li>Number of lowercase letters in the poem</li>
</ul>
<p>Create a plot showing the distribution of the number of words per line across all poems you have in your dataset. Create another plot showing the number of lines in the poem for all poems in your dataset. What does this tell you about the “average” style of the poet in question?</p>
<p>See <a href="./checkpoints.html#part2">Part 2 Checkpoint</a> for an example of what the output should look like from each poet.</p>
<div class="cell">

</div>
</section>
<section id="poetry-analysis" class="level2">
<h2 class="anchored" data-anchor-id="poetry-analysis">Poetry Analysis</h2>
<p>Choose some characteristic(s) of the poet’s style to explore graphically. If necessary, create a subset of the data with poems relevant to your question before you generate numerical summaries. You may want to clean up the data and remove lines which contain quotes (e.g.&nbsp;start with a <code>&gt;</code> character) or horizontal lines in reddit markdown (e.g.&nbsp;only have <code>----</code>).</p>
<p>Some ideas to get you started thinking:</p>
<ul>
<li><p>Number of syllables per line may be used to infer rhyming scheme and/or poetry style. You can use the <code>qdap</code> package in R, which contains the <code>syllable_sum</code> function to count the number of syllables in a sentence. You may need to use a for-loop or program a custom function to use the syllables function on every entry in your data frame column.</p></li>
<li><p>Use of non-alphabetic characters. Schnoodle often uses emoji and other text annotations to convey emotions and excitement - how often do these types of annotations appear in their poems?</p></li>
<li><p>Common characters and phrases. Sprog writes poems frequently about a character named Timmy (who often meets a horrible end). Do these poems have a common format/style/rhyme scheme?</p></li>
<li><p>Sprog often writes longer poems with multiple stanzas. Identify which poems have multiple stanzas (Hint, look for blank lines in a systematic pattern) and show the distribution of stanza length, stanza variation within poems, and number of stanzas in each poem.</p></li>
<li><p>Schnoodle often misspells words intentionally (using e.g.&nbsp;<code>fren</code> instead of <code>friend</code>) to convey that they are writing using an animal’s voice. What proportion of words are misspelled in each poem? How much does this proportion vary? Based on the distribution, how likely is it, in your opinion, that Schnoodle misspells words more often when speaking as one type of animal than another? You can use the <code>hunspell</code> package in R to detect whether words are likely misspelled.</p></li>
</ul>
<div class="cell">

</div>
</section>
</section>
<section id="using-python-to-analyze-replace-this-with-poets-usernames-poems" class="level1">
<h1>Using Python to analyze &lt;Replace this with poet’s username&gt;’s poems</h1>
<section id="splitting-poems-into-lines-1" class="level2">
<h2 class="anchored" data-anchor-id="splitting-poems-into-lines-1">Splitting Poems into Lines</h2>
<p>Split the poem into lines and create a data frame that has</p>
<ul>
<li>a new column called <code>poem_id</code>, numbered from one to the total number of poems by the poet in question</li>
<li>a new variable called <code>line</code> that contains the text of each line of the poem (one row per poem line). To get this, you may need to split the comment string by the endline character (<code>\n</code>) and then unnest or expand your data frame.</li>
<li>a new variable called <code>line_no</code> that contains the line number of the poem. This should be computed per poem.</li>
</ul>
<p>Ensure that you are splitting lines by a string which makes sense. Some poems have multiple paragraphs (stanzas) and may have a blank line in between; you want to preserve this blank line as it will help you make sense of the poem. Some poems instead have blank lines between every line of the poem; in these cases, you may want to split by e.g.&nbsp;<code>\n\n</code> instead of <code>\n</code>. See <a href="./checkpoints.html#part1">Part 1 Checkpoint</a> for an example of what the output should look like from each poet.</p>
<div class="cell">

</div>
</section>
<section id="summarizing-poems-1" class="level2">
<h2 class="anchored" data-anchor-id="summarizing-poems-1">Summarizing Poems</h2>
<p>For each poem, create a summary data frame that contains:</p>
<ul>
<li>Average number of words per line in the poem</li>
<li>Number of lines in the poem</li>
<li>Number of characters which are not letters or spaces (punctuation, numbers, and any non-ASCII characters)</li>
<li>Number of uppercase letters in the poem</li>
<li>Number of lowercase letters in the poem</li>
</ul>
<p>Create a plot showing the distribution of the number of words per line across all poems you have in your dataset. Create another plot showing the number of lines in the poem for all poems in your dataset. What does this tell you about the “average” style of the poet in question?</p>
<div class="cell">

</div>
</section>
<section id="poetry-analysis-1" class="level2">
<h2 class="anchored" data-anchor-id="poetry-analysis-1">Poetry Analysis</h2>
<p>Choose some characteristic(s) of the poet’s style to explore graphically. If necessary, create a subset of the data with poems relevant to your question before you generate numerical summaries. You may want to clean up the data and remove lines which contain quotes (e.g.&nbsp;start with a <code>&gt;</code> character) or horizontal lines in reddit markdown (e.g.&nbsp;only have <code>----</code>).</p>
<p>Some ideas to get you started thinking:</p>
<ul>
<li><p>Number of syllables per line may be used to infer rhyming scheme and/or poetry style. You can use the <code>syllables</code> python package. You may need to use a for-loop or program a custom function to use the syllables function on every entry in your data frame column.</p></li>
<li><p>Use of non-alphabetic characters. Schnoodle often uses emoji and other text annotations to convey emotions and excitement - how often do these types of annotations appear in their poems?</p></li>
<li><p>Common characters and phrases. Sprog writes poems frequently about a character named Timmy (who often meets a horrible end). Do these poems have a common format/style/rhyme scheme?</p></li>
<li><p>Sprog often writes longer poems with multiple stanzas. Identify which poems have multiple stanzas (Hint, look for blank lines in a systematic pattern) and show the distribution of stanza length, stanza variation within poems, and number of stanzas in each poem.</p></li>
<li><p>Schnoodle often misspells words intentionally (using e.g.&nbsp;<code>fren</code> instead of <code>friend</code>) to convey that they are writing using an animal’s voice. What proportion of words are misspelled in each poem? How much does this proportion vary? Based on the distribution, how likely is it, in your opinion, that Schnoodle misspells words more often when speaking as one type of animal than another? You can use one of the python packages discussed in <a href="https://www.geeksforgeeks.org/spelling-checker-in-python/">this post</a> to detect whether words are likely misspelled.</p></li>
</ul>
<div class="cell">

</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>